{% extends 'base.html' %}
{% load static %}
{% block title %}è§£ç­”å±¥æ­´{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/quiz_result.css' %}">
{% endblock %}

{% block extra_js %}
<!-- <script src="{% static 'js/view_questions.js' %}"></script> -->
{% endblock %}

{% block content %}
<div class="center-box">
    <h2>è§£ç­”çµæœ</h2>

    <form method="get" action="{% url 'quiz_result' %}">
    <label for="folder-select">ãƒ•ã‚©ãƒ«ãƒ€ã§çµã‚Šè¾¼ã¿</label>
    <select name="folder_id" id="folder-select" onchange="this.form.submit()">
        <option value="">å…¨ã¦è¡¨ç¤º</option>
        {% for folder in folder_list %}
        <option value="{{ folder.folder_id }}" {% if folder.folder_id|stringformat:"s" == selected_folder_id %}selected{% endif %}>
            {{ folder.folder_name }}
        </option>
        {% endfor %}
    </select>
    </form>

    <table>
    <tr>
        <th>ãƒ•ã‚©ãƒ«ãƒ€</th>
        <th>å•é¡Œ</th>
        <th>ã‚ãªãŸã®è§£ç­”</th>
        <th>æ­£èª¤</th>
        <th>è§£ç­”æ—¥æ™‚</th>  <!-- ğŸ†• è§£ç­”æ—¥æ™‚ã®åˆ—ã‚’è¿½åŠ  -->
    </tr>
    {% for record in records %}
    <tr>
        <td>{{ record.folder_name }}</td>
        <td>
            {{ record.question_content|slice:":20" }}{% if record.question_content|length > 20 %}...{% endif %}
        </td>
        <td>{{ record.answered_contents|join:", " }}</td>
        <td>
            {% if record.is_correct %}
            <span style="color:green;">ã€‡</span>
            {% else %}
            <span style="color:red;">âœ•</span>
            {% endif %}
        </td>
        <td>
            {% if record.answered_at %}
                {{ record.answered_at|date:"Y-m-d H:i" }}
            {% else %}
                -
            {% endif %}
        </td>
    </tr>
    {% endfor %}
    </table>

    {% include 'pagination.html' %}

    <a href="{% url 'inside_room' %}" class="nav-button">ãƒ«ãƒ¼ãƒ ã¸æˆ»ã‚‹</a>
</div>
{% endblock %}